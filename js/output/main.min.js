$((function(){$("input,textarea").jqBootstrapValidation({preventSubmit:!0,submitSuccess:function(t,a){if(!t.attr("action")){a.preventDefault();var e=function(t){var a="./includes/"+t.attr("id")+".php";t.attr("template-path")&&(a=t.attr("template-path")+"/includes/"+t.attr("id")+".php");return a}(t),i={};t.find("input, textarea, option:selected").each((function(t){var a=$(this).val(),e=$(this).attr("id");$(this).is(":checkbox")?a=$(this).is(":checked"):$(this).is(":radio")?a=$(this).val()+" = "+$(this).is(":checked"):$(this).is("option:selected")&&(e=$(this).parent().attr("id")),i[e]=a})),$.ajax({url:e,type:"POST",data:i,cache:!1,success:function(){t.is("[data-success-msg]")?t.append("<div id='form-alert'><div class='alert alert-success'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button><strong>"+t.attr("data-success-msg")+"</strong></div></div>"):window.location.replace(t.attr("success-url")),t.trigger("reset")},error:function(){0==$("#form-alert").length&&t.append("<div id='form-alert'><div class='alert alert-danger'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button><strong>"+t.attr("data-fail-msg")+"</strong></div></div>")}})}},filter:function(){return $(this).is(":visible")}})}));
!function(a){var e=[],t={options:{prependExistingHelpBlock:!1,sniffHtml:!0,preventSubmit:!0,submitError:!1,submitSuccess:!1,semanticallyStrict:!1,autoAdd:{helpBlocks:!0},filter:function(){return!0}},methods:{init:function(o){var r=a.extend(!0,{},t);r.options=a.extend(!0,r.options,o);var l=a.unique(this.map((function(){return a(this).parents("form")[0]})).toArray());return a(l).bind("submit",(function(e){var t=a(this),i=0,n=t.find("input,textarea,select").not("[type=submit],[type=image]").filter(r.options.filter);n.trigger("submit.validation").trigger("validationLostFocus.validation"),n.each((function(e,t){var n=a(t).parents(".form-group, .checkbox").first();n.hasClass("warning")&&(n.removeClass("warning").addClass("error"),i++)})),n.trigger("validationLostFocus.validation"),i?(r.options.preventSubmit&&e.preventDefault(),t.addClass("error"),a.isFunction(r.options.submitError)&&r.options.submitError(t,e,n.jqBootstrapValidation("collectErrors",!0))):(t.removeClass("error"),a.isFunction(r.options.submitSuccess)&&r.options.submitSuccess(t,e))})),this.each((function(){var t=a(this),o=t.parents(".form-group, .checkbox").first(),l=o.find(".help-block").first(),s=t.parents("form").first(),d=[];if(!l.length&&r.options.autoAdd&&r.options.autoAdd.helpBlocks&&(l=a('<div class="help-block" />'),o.append(l),e.push(l[0])),r.options.sniffHtml){var c="";if(void 0!==t.attr("pattern")&&(c="Not in the expected format\x3c!-- data-validation-pattern-message to override --\x3e",t.data("validationPatternMessage")&&(c=t.data("validationPatternMessage")),t.data("validationPatternMessage",c),t.data("validationPatternRegex",t.attr("pattern"))),void 0!==t.attr("max")||void 0!==t.attr("aria-valuemax")){var v=void 0!==t.attr("max")?t.attr("max"):t.attr("aria-valuemax");c="Too high: Maximum of '"+v+"'\x3c!-- data-validation-max-message to override --\x3e",t.data("validationMaxMessage")&&(c=t.data("validationMaxMessage")),t.data("validationMaxMessage",c),t.data("validationMaxMax",v)}if(void 0!==t.attr("min")||void 0!==t.attr("aria-valuemin")){var m=void 0!==t.attr("min")?t.attr("min"):t.attr("aria-valuemin");c="Too low: Minimum of '"+m+"'\x3c!-- data-validation-min-message to override --\x3e",t.data("validationMinMessage")&&(c=t.data("validationMinMessage")),t.data("validationMinMessage",c),t.data("validationMinMin",m)}void 0!==t.attr("maxlength")&&(c="Too long: Maximum of '"+t.attr("maxlength")+"' characters\x3c!-- data-validation-maxlength-message to override --\x3e",t.data("validationMaxlengthMessage")&&(c=t.data("validationMaxlengthMessage")),t.data("validationMaxlengthMessage",c),t.data("validationMaxlengthMaxlength",t.attr("maxlength"))),void 0!==t.attr("minlength")&&(c="Too short: Minimum of '"+t.attr("minlength")+"' characters\x3c!-- data-validation-minlength-message to override --\x3e",t.data("validationMinlengthMessage")&&(c=t.data("validationMinlengthMessage")),t.data("validationMinlengthMessage",c),t.data("validationMinlengthMinlength",t.attr("minlength"))),void 0===t.attr("required")&&void 0===t.attr("aria-required")||(c=r.builtInValidators.required.message,t.data("validationRequiredMessage")&&(c=t.data("validationRequiredMessage")),t.data("validationRequiredMessage",c)),void 0!==t.attr("type")&&"number"===t.attr("type").toLowerCase()&&(c=r.builtInValidators.number.message,t.data("validationNumberMessage")&&(c=t.data("validationNumberMessage")),t.data("validationNumberMessage",c)),void 0!==t.attr("type")&&"email"===t.attr("type").toLowerCase()&&(c="Adresse e-mail non valide\x3c!-- data-validator-validemail-message to override --\x3e",t.data("validationValidemailMessage")?c=t.data("validationValidemailMessage"):t.data("validationEmailMessage")&&(c=t.data("validationEmailMessage")),t.data("validationValidemailMessage",c)),void 0!==t.attr("minchecked")&&(c="Not enough options checked; Minimum of '"+t.attr("minchecked")+"' required\x3c!-- data-validation-minchecked-message to override --\x3e",t.data("validationMincheckedMessage")&&(c=t.data("validationMincheckedMessage")),t.data("validationMincheckedMessage",c),t.data("validationMincheckedMinchecked",t.attr("minchecked"))),void 0!==t.attr("maxchecked")&&(c="Too many options checked; Maximum of '"+t.attr("maxchecked")+"' required\x3c!-- data-validation-maxchecked-message to override --\x3e",t.data("validationMaxcheckedMessage")&&(c=t.data("validationMaxcheckedMessage")),t.data("validationMaxcheckedMessage",c),t.data("validationMaxcheckedMaxchecked",t.attr("maxchecked")))}void 0!==t.data("validation")&&(d=t.data("validation").split(",")),a.each(t.data(),(function(a,e){var t=a.replace(/([A-Z])/g,",$1").split(",");"validation"===t[0]&&t[1]&&d.push(t[1])}));var u=d,g=[];do{a.each(d,(function(a,e){d[a]=i(e)})),d=a.unique(d),g=[],a.each(u,(function(e,n){if(void 0!==t.data("validation"+n+"Shortcut"))a.each(t.data("validation"+n+"Shortcut").split(","),(function(a,e){g.push(e)}));else if(r.builtInValidators[n.toLowerCase()]){var o=r.builtInValidators[n.toLowerCase()];"shortcut"===o.type.toLowerCase()&&a.each(o.shortcut.split(","),(function(a,e){e=i(e),g.push(e),d.push(e)}))}})),u=g}while(u.length>0);var h={};a.each(d,(function(e,n){var o=t.data("validation"+n+"Message"),l=void 0!==o,s=!1;if(o=o||"'"+n+"' validation failed \x3c!-- Add attribute 'data-validation-"+n.toLowerCase()+"-message' to input to change this message --\x3e",a.each(r.validatorTypes,(function(e,r){void 0===h[e]&&(h[e]=[]),s||void 0===t.data("validation"+n+i(r.name))||(h[e].push(a.extend(!0,{name:i(r.name),message:o},r.init(t,n))),s=!0)})),!s&&r.builtInValidators[n.toLowerCase()]){var d=a.extend(!0,{},r.builtInValidators[n.toLowerCase()]);l&&(d.message=o);var c=d.type.toLowerCase();"shortcut"===c?s=!0:a.each(r.validatorTypes,(function(e,o){void 0===h[e]&&(h[e]=[]),s||c!==e.toLowerCase()||(t.data("validation"+n+i(o.name),d[o.name.toLowerCase()]),h[c].push(a.extend(d,o.init(t,n))),s=!0)}))}s||a.error("Cannot find validation info for '"+n+"'")})),l.data("original-contents",l.data("original-contents")?l.data("original-contents"):l.html()),l.data("original-role",l.data("original-role")?l.data("original-role"):l.attr("role")),o.data("original-classes",o.data("original-clases")?o.data("original-classes"):o.attr("class")),t.data("original-aria-invalid",t.data("original-aria-invalid")?t.data("original-aria-invalid"):t.attr("aria-invalid")),t.bind("validation.validation",(function(e,i){var o=n(t),l=[];return a.each(h,(function(e,n){(o||o.length||i&&i.includeEmpty||r.validatorTypes[e].blockSubmit&&i&&i.submitting)&&a.each(n,(function(a,i){r.validatorTypes[e].validate(t,o,i)&&l.push(i.message)}))})),l})),t.bind("getValidators.validation",(function(){return h})),t.bind("submit.validation",(function(){return t.triggerHandler("change.validation",{submitting:!0})})),t.bind(["keyup","focus","blur","click","keydown","keypress","change"].join(".validation ")+".validation",(function(e,i){var d=n(t),c=[];o.find("input,textarea,select").each((function(e,n){var o=c.length;if(a.each(a(n).triggerHandler("validation.validation",i),(function(a,e){c.push(e)})),c.length>o)a(n).attr("aria-invalid","true");else{var r=t.data("original-aria-invalid");a(n).attr("aria-invalid",void 0!==r&&r)}})),s.find("input,select,textarea").not(t).not('[name="'+t.attr("name")+'"]').trigger("validationLostFocus.validation"),(c=a.unique(c.sort())).length?(o.removeClass("success error").addClass("warning"),r.options.semanticallyStrict&&1===c.length?l.html(c[0]+(r.options.prependExistingHelpBlock?l.data("original-contents"):"")):l.html('<ul class="list-unstyled alert alert-warning" role="alert"><li>'+c.join("</li><li>")+"</li></ul>"+(r.options.prependExistingHelpBlock?l.data("original-contents"):""))):(o.removeClass("warning error success"),d.length>0&&o.addClass("success"),l.html(l.data("original-contents"))),"blur"===e.type&&o.removeClass("success")})),t.bind("validationLostFocus.validation",(function(){o.removeClass("success")}))}))},destroy:function(){return this.each((function(){var t=a(this),i=t.parents(".form-group, .checkbox").first(),n=i.find(".help-block").first();t.unbind(".validation"),n.html(n.data("original-contents")),i.attr("class",i.data("original-classes")),t.attr("aria-invalid",t.data("original-aria-invalid")),n.attr("role",t.data("original-role")),e.indexOf(n[0])>-1&&n.remove()}))},collectErrors:function(e){var t={};return this.each((function(e,i){var n=a(i),o=n.attr("name"),r=n.triggerHandler("validation.validation",{includeEmpty:!0});t[o]=a.extend(!0,r,t[o])})),a.each(t,(function(a,e){0===e.length&&delete t[a]})),t},hasErrors:function(){var e=[];return this.each((function(t,i){e=e.concat(a(i).triggerHandler("getValidators.validation")?a(i).triggerHandler("validation.validation",{submitting:!0}):[])})),e.length>0},override:function(e){t=a.extend(!0,t,e)}},validatorTypes:{callback:{name:"callback",init:function(a,e){return{validatorName:e,callback:a.data("validation"+e+"Callback"),lastValue:a.val(),lastValid:!0,lastFinished:!0}},validate:function(a,e,t){if(t.lastValue===e&&t.lastFinished)return!t.lastValid;if(!0===t.lastFinished){t.lastValue=e,t.lastValid=!0,t.lastFinished=!1;var i=t,n=a;!function(a,e){for(var t=Array.prototype.slice.call(arguments).splice(2),i=a.split("."),n=i.pop(),o=0;o<i.length;o++)e=e[i[o]];e[n].apply(this,t)}(t.callback,window,a,e,(function(a){i.lastValue===a.value&&(i.lastValid=a.valid,a.message&&(i.message=a.message),i.lastFinished=!0,n.data("validation"+i.validatorName+"Message",i.message),setTimeout((function(){n.trigger("change.validation")}),1))}))}return!1}},ajax:{name:"ajax",init:function(a,e){return{validatorName:e,url:a.data("validation"+e+"Ajax"),lastValue:a.val(),lastValid:!0,lastFinished:!0}},validate:function(e,t,i){return""+i.lastValue==""+t&&!0===i.lastFinished?!1===i.lastValid:(!0===i.lastFinished&&(i.lastValue=t,i.lastValid=!0,i.lastFinished=!1,a.ajax({url:i.url,data:"value="+t+"&field="+e.attr("name"),dataType:"json",success:function(a){""+i.lastValue==""+a.value&&(i.lastValid=!!a.valid,a.message&&(i.message=a.message),i.lastFinished=!0,e.data("validation"+i.validatorName+"Message",i.message),setTimeout((function(){e.trigger("change.validation")}),1))},failure:function(){i.lastValid=!0,i.message="ajax call failed",i.lastFinished=!0,e.data("validation"+i.validatorName+"Message",i.message),setTimeout((function(){e.trigger("change.validation")}),1)}})),!1)}},regex:{name:"regex",init:function(a,e){return{regex:(t=a.data("validation"+e+"Regex"),new RegExp("^"+t+"$"))};var t},validate:function(a,e,t){return!t.regex.test(e)&&!t.negative||t.regex.test(e)&&t.negative}},required:{name:"required",init:function(a,e){return{}},validate:function(a,e,t){return!(0!==e.length||t.negative)||!!(e.length>0&&t.negative)},blockSubmit:!0},match:{name:"match",init:function(a,e){var t=a.parents("form").first().find('[name="'+a.data("validation"+e+"Match")+'"]').first();return t.bind("validation.validation",(function(){a.trigger("change.validation",{submitting:!0})})),{element:t}},validate:function(a,e,t){return e!==t.element.val()&&!t.negative||e===t.element.val()&&t.negative},blockSubmit:!0},max:{name:"max",init:function(a,e){return{max:a.data("validation"+e+"Max")}},validate:function(a,e,t){return parseFloat(e,10)>parseFloat(t.max,10)&&!t.negative||parseFloat(e,10)<=parseFloat(t.max,10)&&t.negative}},min:{name:"min",init:function(a,e){return{min:a.data("validation"+e+"Min")}},validate:function(a,e,t){return parseFloat(e)<parseFloat(t.min)&&!t.negative||parseFloat(e)>=parseFloat(t.min)&&t.negative}},maxlength:{name:"maxlength",init:function(a,e){return{maxlength:a.data("validation"+e+"Maxlength")}},validate:function(a,e,t){return e.length>t.maxlength&&!t.negative||e.length<=t.maxlength&&t.negative}},minlength:{name:"minlength",init:function(a,e){return{minlength:a.data("validation"+e+"Minlength")}},validate:function(a,e,t){return e.length<t.minlength&&!t.negative||e.length>=t.minlength&&t.negative}},maxchecked:{name:"maxchecked",init:function(a,e){var t=a.parents("form").first().find('[name="'+a.attr("name")+'"]');return t.bind("click.validation",(function(){a.trigger("change.validation",{includeEmpty:!0})})),{maxchecked:a.data("validation"+e+"Maxchecked"),elements:t}},validate:function(a,e,t){return t.elements.filter(":checked").length>t.maxchecked&&!t.negative||t.elements.filter(":checked").length<=t.maxchecked&&t.negative},blockSubmit:!0},minchecked:{name:"minchecked",init:function(a,e){var t=a.parents("form").first().find('[name="'+a.attr("name")+'"]');return t.bind("click.validation",(function(){a.trigger("change.validation",{includeEmpty:!0})})),{minchecked:a.data("validation"+e+"Minchecked"),elements:t}},validate:function(a,e,t){return t.elements.filter(":checked").length<t.minchecked&&!t.negative||t.elements.filter(":checked").length>=t.minchecked&&t.negative},blockSubmit:!0}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,10}",message:"Adresse e-mail non valide\x3c!-- data-validator-validemail-message to override --\x3e"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password\x3c!-- data-validator-paswordagain-message to override --\x3e"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\d+(\\.\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number\x3c!-- data-validator-number-message to override --\x3e"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed\x3c!-- data-validator-integer-message to override --\x3e"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number\x3c!-- data-validator-positivenumber-message to override --\x3e"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number\x3c!-- data-validator-negativenumber-message to override --\x3e"},required:{name:"Required",type:"required",message:"Champs requis\x3c!-- data-validator-required-message to override --\x3e"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option\x3c!-- data-validation-checkone-message to override --\x3e"}}},i=function(a){return a.toLowerCase().replace(/(^|\s)([a-z])/g,(function(a,e,t){return e+t.toUpperCase()}))},n=function(e){var t=e.val(),i=e.attr("type");return"checkbox"===i&&(t=e.is(":checked")?t:""),"radio"===i&&(t=a('input[name="'+e.attr("name")+'"]:checked').length>0?t:""),t};a.fn.jqBootstrapValidation=function(e){return t.methods[e]?t.methods[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(a.error("Method "+e+" does not exist on jQuery.jqBootstrapValidation"),null):t.methods.init.apply(this,arguments)},a.jqBootstrapValidation=function(e){a(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}}(jQuery);
function setUpSpecialNavs(){$(".navbar-toggle").click((function(t){var e=$(this).closest("nav"),i=e.find("ul.site-navigation"),a=i.clone();if(i.parent().hasClass("nav-special"))if(t.stopPropagation(),$(this).hasClass("selected-nav"))$(".blocsapp-special-menu blocsnav").removeClass("open"),$(".selected-nav").removeClass("selected-nav"),setTimeout((function(){$(".blocsapp-special-menu").remove(),$("body").removeClass("lock-scroll"),$(".selected-nav").removeClass("selected-nav")}),300);else{$(this).addClass("selected-nav");var o=e.attr("class").replace("navbar","").replace("row",""),l=i.parent().attr("class").replace("navbar-collapse","").replace("collapse","");($(".content-tint").length=-1)&&$("body").append('<div class="content-tint"></div>'),a.insertBefore(".page-container").wrap('<div class="blocsapp-special-menu '+o+'"><blocsnav class="'+l+'">'),$("blocsnav").prepend('<a class="close-special-menu animated fadeIn" style="animation-delay:0.5s;"><div class="close-icon"></div></a>'),function(){var t="fadeInRight",e=0,i=60;$(".blocsapp-special-menu blocsnav").hasClass("fullscreen-nav")?(t="fadeIn",i=100):$(".blocsapp-special-menu").hasClass("nav-invert")&&(t="fadeInLeft"),$(".blocsapp-special-menu blocsnav li").each((function(){$(this).parent().hasClass("dropdown-menu")?$(this).addClass("animated fadeIn"):(e+=i,$(this).attr("style","animation-delay:"+e+"ms").addClass("animated "+t))}))}(),setTimeout((function(){$(".blocsapp-special-menu blocsnav").addClass("open"),$(".content-tint").addClass("on"),$("body").addClass("lock-scroll")}),10)}})),$("body").on("mousedown touchstart",".content-tint, .close-special-menu",(function(t){$(".content-tint").removeClass("on"),$(".selected-nav").click(),setTimeout((function(){$(".content-tint").remove()}),10)})).on("click",".blocsapp-special-menu a",(function(t){$(t.target).closest(".dropdown-toggle").length||$(".close-special-menu").mousedown()}))}function extraNavFuncs(){$(".site-navigation a").click((function(t){$(t.target).closest(".dropdown-toggle").length||$(".navbar-collapse").collapse("hide")})),$("a.dropdown-toggle").click((function(t){$(this).parent().addClass("target-open-menu"),$(this).closest(".dropdown-menu").find(".dropdown.open").each((function(t){$(this).hasClass("target-open-menu")||$(this).removeClass("open")})),$(".target-open-menu").removeClass("target-open-menu")}))}function setFillScreenBlocHeight(){$(".bloc-fill-screen").each((function(t){var e=$(this);window.fillBodyHeight=0,$(this).find(".container").each((function(t){fillPadding=2*parseInt($(this).css("padding-top")),e.hasClass("bloc-group")?fillBodyHeight=fillPadding+$(this).outerHeight()+50:fillBodyHeight=fillBodyHeight+fillPadding+$(this).outerHeight()+50})),$(this).css("height",getFillHeight()+"px")}))}function getFillHeight(){var t=$(window).height();return t<fillBodyHeight&&(t=fillBodyHeight+100),t}function scrollToTarget(t){1==t?t=0:2==t?t=$(document).height():(t=$(t).offset().top,$(".sticky-nav").length&&(t-=$(".sticky-nav .navbar-header").height())),$("html,body").animate({scrollTop:t},"slow"),$(".navbar-collapse").collapse("hide")}function animateWhenVisible(){hideAll(),inViewCheck(),$(window).scroll((function(){inViewCheck(),scrollToTopView(),stickyNavToggle()}))}function setUpDropdownSubs(){$("ul.dropdown-menu [data-toggle=dropdown]").on("click",(function(t){t.preventDefault(),t.stopPropagation(),$(this).parent().siblings().removeClass("open"),$(this).parent().toggleClass("open");var e=$(this).parent().children(".dropdown-menu");e.offset().left+e.width()>$(window).width()&&e.addClass("dropmenu-flow-right")}))}function stickyNavToggle(){var t=0,e="sticky";if($(".sticky-nav").hasClass("fill-bloc-top-edge")){var i=$(".fill-bloc-top-edge.sticky-nav").parent().css("background-color");"rgba(0, 0, 0, 0)"==i&&(i="#FFFFFF"),$(".sticky-nav").css("background",i),t=$(".sticky-nav").height(),e="sticky animated fadeInDown"}$(window).scrollTop()>t?($(".sticky-nav").addClass(e),"sticky"==e&&$(".page-container").css("padding-top",$(".sticky-nav").height())):($(".sticky-nav").removeClass(e).removeAttr("style"),$(".page-container").removeAttr("style"))}function hideAll(){$(".animated").each((function(t){$(this).closest(".hero").length||$(this).removeClass("animated").addClass("hideMe")}))}function inViewCheck(){$($(".hideMe").get().reverse()).each((function(t){var e=jQuery(this),i=e.offset().top+e.height(),a=$(window).scrollTop()+$(window).height();if(e.height()>$(window).height()&&(i=e.offset().top),i<a){var o=e.attr("class").replace("hideMe","animated");e.css("visibility","hidden").removeAttr("class"),setTimeout((function(){e.attr("class",o).css("visibility","visible")}),.01)}}))}function scrollToTopView(){$(window).scrollTop()>$(window).height()/3?$(".scrollToTop").hasClass("showScrollTop")||$(".scrollToTop").addClass("showScrollTop"):$(".scrollToTop").removeClass("showScrollTop")}function setUpVisibilityToggle(){$(document).on("click","[data-toggle-visibility]",(function(t){t.preventDefault();var e=$(this).attr("data-toggle-visibility");if(-1!=e.indexOf(",")){var i=e.split(",");$.each(i,(function(t){a($("#"+i[t]))}))}else a($("#"+e));function a(t){t.is("img")?t.toggle():t.slideToggle()}}))}function setUpLightBox(){window.targetLightbox,$(document).on("click","[data-lightbox]",(function(t){t.preventDefault(),targetLightbox=$(this);var e=targetLightbox.attr("data-lightbox"),i=targetLightbox.attr("data-autoplay"),a='<p class="lightbox-caption">'+targetLightbox.attr("data-caption")+"</p>",o="no-gallery-set",l=targetLightbox.attr("data-frame");targetLightbox.attr("data-gallery-id")&&(o=targetLightbox.attr("data-gallery-id")),targetLightbox.attr("data-caption")||(a="");var n="";1==i&&(n="autoplay");var s=$('<div id="lightbox-modal" class="modal fade"><div class="modal-dialog"><div class="modal-content '+l+' blocs-lb-container"><button id="blocs-lightbox-close-btn" type="button" class="close-lightbox" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><a href="#" class="prev-lightbox" aria-label="prev"><span class="fa fa-chevron-left"></span></a><a href="#" class="next-lightbox" aria-label="next"><span class="fa fa-chevron-right"></span></a><img id="lightbox-image" class="img-responsive" src="'+e+'"><div id="lightbox-video-container" class="embed-responsive embed-responsive-16by9"><video controls '+n+' class="embed-responsive-item"><source id="lightbox-video" src="'+e+'" type="video/mp4"></video></div>'+a+"</div></div></div></div>");$("body").append(s),"fullscreen-lb"==l&&($("#lightbox-modal").addClass("fullscreen-modal").append('<a class="close-full-screen-modal animated fadeIn" style="animation-delay:0.5s;" onclick="$(\'#lightbox-modal\').modal(\'hide\');"><div class="close-icon"></div></a>'),$("#blocs-lightbox-close-btn").remove()),".mp4"==e.substring(e.length-4)?($("#lightbox-image, .lightbox-caption").hide(),$("#lightbox-video-container").show()):($("#lightbox-image,.lightbox-caption").show(),$("#lightbox-video-container").hide()),$("#lightbox-modal").modal("show"),"no-gallery-set"==o?(0==$("a[data-lightbox]").index(targetLightbox)&&$(".prev-lightbox").hide(),$("a[data-lightbox]").index(targetLightbox)==$("a[data-lightbox]").length-1&&$(".next-lightbox").hide()):(0==$('a[data-gallery-id="'+o+'"]').index(targetLightbox)&&$(".prev-lightbox").hide(),$('a[data-gallery-id="'+o+'"]').index(targetLightbox)==$('a[data-gallery-id="'+o+'"]').length-1&&$(".next-lightbox").hide()),addLightBoxSwipeSupport()})).on("hidden.bs.modal","#lightbox-modal",(function(){$("#lightbox-modal").remove()})),$(document).on("click",".next-lightbox, .prev-lightbox",(function(t){t.preventDefault();var e="no-gallery-set",i=$("a[data-lightbox]").index(targetLightbox),a=$("a[data-lightbox]").eq(i+1);targetLightbox.attr("data-gallery-id")&&(e=targetLightbox.attr("data-gallery-id"),i=$('a[data-gallery-id="'+e+'"]').index(targetLightbox),a=$('a[data-gallery-id="'+e+'"]').eq(i+1)),$(this).hasClass("prev-lightbox")&&(a=$('a[data-gallery-id="'+e+'"]').eq(i-1),"no-gallery-set"==e&&(a=$("a[data-lightbox]").eq(i-1)));var o=a.attr("data-lightbox");if(".mp4"==o.substring(o.length-4)){var l="";1==a.attr("data-autoplay")&&(l="autoplay"),$("#lightbox-image, .lightbox-caption").hide(),$("#lightbox-video-container").show().html("<video controls "+l+' class="embed-responsive-item"><source id="lightbox-video" src="'+o+'" type="video/mp4"></video>')}else $("#lightbox-image").attr("src",o).show(),$(".lightbox-caption").html(a.attr("data-caption")).show(),$("#lightbox-video-container").hide();targetLightbox=a,$(".next-lightbox, .prev-lightbox").hide(),"no-gallery-set"==e?($("a[data-lightbox]").index(a)!=$("a[data-lightbox]").length-1&&$(".next-lightbox").show(),$("a[data-lightbox]").index(a)>0&&$(".prev-lightbox").show()):($('a[data-gallery-id="'+e+'"]').index(a)!=$('a[data-gallery-id="'+e+'"]').length-1&&$(".next-lightbox").show(),$('a[data-gallery-id="'+e+'"]').index(a)>0&&$(".prev-lightbox").show())}))}function addSwipeSupport(){$(".carousel-inner").length&&$(".carousel-inner").swipe({swipeLeft:function(t,e,i,a,o){$(this).parent().carousel("next")},swipeRight:function(){$(this).parent().carousel("prev")},threshold:0})}function addKeyBoardSupport(){$(window).keydown((function(t){37==t.which?$(".prev-lightbox").is(":visible")&&$(".prev-lightbox").click():39==t.which&&$(".next-lightbox").is(":visible")&&$(".next-lightbox").click()}))}function addLightBoxSwipeSupport(){$("#lightbox-image").length&&$("#lightbox-image").swipe({swipeLeft:function(t,e,i,a,o){$(".next-lightbox").is(":visible")&&$(".next-lightbox").click()},swipeRight:function(){$(".prev-lightbox").is(":visible")&&$(".prev-lightbox").click()},threshold:0})}$(document).ready((function(){$("#scroll-hero").click((function(t){t.preventDefault(),$("html,body").animate({scrollTop:$("#scroll-hero").closest(".bloc").height()},"slow")})),extraNavFuncs(),setUpSpecialNavs(),setUpDropdownSubs(),setUpLightBox(),setUpVisibilityToggle(),addSwipeSupport(),addKeyBoardSupport(),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$("#page-loading-blocs-notifaction").remove()})),$(window).load((function(){setFillScreenBlocHeight(),animateWhenVisible(),$("#page-loading-blocs-notifaction").remove()})).resize((function(){setFillScreenBlocHeight()})),$((function(){$('[data-toggle="tooltip"]').tooltip()}));
/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
!function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}((function(e){"use strict";function n(n){return!n||void 0!==n.allowPageScroll||void 0===n.swipe&&void 0===n.swipeStatus||(n.allowPageScroll=s),void 0!==n.click&&void 0===n.tap&&(n.tap=n.click),n||(n={}),n=e.extend({},e.fn.swipe.defaults,n),this.each((function(){var r=e(this),i=r.data(D);i||(i=new t(this,n),r.data(D,i))}))}function t(n,t){function P(n){if(!(!0===me.data(D+"_intouch")||e(n.target).closest(t.excludedElements,me).length>0)){var a=n.originalEvent?n.originalEvent:n;if(!a.pointerType||"mouse"!=a.pointerType||0!=t.fallbackToMouseEvents){var u,s=a.touches,c=s?s[0]:a;return xe=y,s?Se=s.length:!1!==t.preventDefaultEvents&&n.preventDefault(),he=0,fe=null,de=null,ye=null,ge=0,we=0,ve=0,Te=1,be=0,(p={})[r]=ne(r),p[i]=ne(i),p[l]=ne(l),p[o]=ne(o),Ee=p,Z(),K(0,c),!s||Se===t.fingers||t.fingers===T||C()?(Me=le(),2==Se&&(K(1,s[1]),we=ve=re(Oe[0].start,Oe[1].start)),(t.swipeStatus||t.pinchStatus)&&(u=j(a,xe))):u=!1,!1===u?(j(a,xe=x),u):(t.hold&&(Ae=setTimeout(e.proxy((function(){me.trigger("hold",[a.target]),t.hold&&(u=t.hold.call(me,a,a.target))}),this),t.longTapThreshold)),J(!0),null)}}var p}function L(n){var p,h,f=n.originalEvent?n.originalEvent:n;if(xe!==m&&xe!==x&&!B()){var d,g=f.touches,b=$(g?g[0]:f);if(De=le(),g&&(Se=g.length),t.hold&&clearTimeout(Ae),xe=E,2==Se&&(0==we?(K(1,g[1]),we=ve=re(Oe[0].start,Oe[1].start)):($(g[1]),ve=re(Oe[0].end,Oe[1].end),Oe[0].end,Oe[1].end,ye=Te<1?u:a),Te=(ve/we*1).toFixed(2),be=Math.abs(we-ve)),Se===t.fingers||t.fingers===T||!g||C()){if(fe=ie(b.start,b.end),function(e,n){if(!1!==t.preventDefaultEvents)if(t.allowPageScroll===s)e.preventDefault();else{var a=t.allowPageScroll===c;switch(n){case r:(t.swipeLeft&&a||!a&&t.allowPageScroll!=w)&&e.preventDefault();break;case i:(t.swipeRight&&a||!a&&t.allowPageScroll!=w)&&e.preventDefault();break;case l:(t.swipeUp&&a||!a&&t.allowPageScroll!=v)&&e.preventDefault();break;case o:(t.swipeDown&&a||!a&&t.allowPageScroll!=v)&&e.preventDefault()}}}(n,de=ie(b.last,b.end)),p=b.start,h=b.end,he=Math.round(Math.sqrt(Math.pow(h.x-p.x,2)+Math.pow(h.y-p.y,2))),ge=te(),function(e,n){e!=s&&(n=Math.max(n,ee(e)),Ee[e].distance=n)}(fe,he),d=j(f,xe),!t.triggerOnTouchEnd||t.triggerOnTouchLeave){var y=!0;if(t.triggerOnTouchLeave){var S=function(n){var t=(n=e(n)).offset(),r={left:t.left,right:t.left+n.outerWidth(),top:t.top,bottom:t.top+n.outerHeight()};return r}(this);y=function(e,n){return e.x>n.left&&e.x<n.right&&e.y>n.top&&e.y<n.bottom}(b.end,S)}!t.triggerOnTouchEnd&&y?xe=U(E):t.triggerOnTouchLeave&&!y&&(xe=U(m)),xe!=x&&xe!=m||j(f,xe)}}else j(f,xe=x);!1===d&&j(f,xe=x)}}function R(e){var n=e.originalEvent?e.originalEvent:e,r=n.touches;if(r){if(r.length&&!B())return function(e){Pe=le(),Le=e.touches.length+1}(n),!0;if(r.length&&B())return!0}return B()&&(Se=Le),De=le(),ge=te(),_()||!H()?j(n,xe=x):t.triggerOnTouchEnd||!1===t.triggerOnTouchEnd&&xe===E?(!1!==t.preventDefaultEvents&&!1!==e.cancelable&&e.preventDefault(),j(n,xe=m)):!t.triggerOnTouchEnd&&W()?N(n,xe=m,f):xe===E&&j(n,xe=x),J(!1),null}function k(){Se=0,De=0,Me=0,we=0,ve=0,Te=1,Z(),J(!1)}function A(e){var n=e.originalEvent?e.originalEvent:e;t.triggerOnTouchLeave&&j(n,xe=U(m))}function I(){me.unbind(ae,P),me.unbind(pe,k),me.unbind(ue,L),me.unbind(se,R),ce&&me.unbind(ce,A),J(!1)}function U(e){var n=e,r=q(),i=H(),l=_();return!r||l?n=x:!i||e!=E||t.triggerOnTouchEnd&&!t.triggerOnTouchLeave?!i&&e==m&&t.triggerOnTouchLeave&&(n=x):n=m,n}function j(e,n){var r,i=e.touches;return(!(!F()||!X())||X())&&(r=N(e,n,p)),(!(!Q()||!C())||C())&&!1!==r&&(r=N(e,n,h)),G()&&z()&&!1!==r?r=N(e,n,d):ge>t.longTapThreshold&&he<b&&t.longTap&&!1!==r?r=N(e,n,g):!(1!==Se&&S||!(isNaN(he)||he<t.threshold)||!W())&&!1!==r&&(r=N(e,n,f)),n===x&&k(),n===m&&(i&&i.length||k()),r}function N(n,s,c){var w;if(c==p){if(me.trigger("swipeStatus",[s,fe||null,he||0,ge||0,Se,Oe,de]),t.swipeStatus&&!1===(w=t.swipeStatus.call(me,n,s,fe||null,he||0,ge||0,Se,Oe,de)))return!1;if(s==m&&F()){if(clearTimeout(ke),clearTimeout(Ae),me.trigger("swipe",[fe,he,ge,Se,Oe,de]),t.swipe&&!1===(w=t.swipe.call(me,n,fe,he,ge,Se,Oe,de)))return!1;switch(fe){case r:me.trigger("swipeLeft",[fe,he,ge,Se,Oe,de]),t.swipeLeft&&(w=t.swipeLeft.call(me,n,fe,he,ge,Se,Oe,de));break;case i:me.trigger("swipeRight",[fe,he,ge,Se,Oe,de]),t.swipeRight&&(w=t.swipeRight.call(me,n,fe,he,ge,Se,Oe,de));break;case l:me.trigger("swipeUp",[fe,he,ge,Se,Oe,de]),t.swipeUp&&(w=t.swipeUp.call(me,n,fe,he,ge,Se,Oe,de));break;case o:me.trigger("swipeDown",[fe,he,ge,Se,Oe,de]),t.swipeDown&&(w=t.swipeDown.call(me,n,fe,he,ge,Se,Oe,de))}}}if(c==h){if(me.trigger("pinchStatus",[s,ye||null,be||0,ge||0,Se,Te,Oe]),t.pinchStatus&&!1===(w=t.pinchStatus.call(me,n,s,ye||null,be||0,ge||0,Se,Te,Oe)))return!1;if(s==m&&Q())switch(ye){case a:me.trigger("pinchIn",[ye||null,be||0,ge||0,Se,Te,Oe]),t.pinchIn&&(w=t.pinchIn.call(me,n,ye||null,be||0,ge||0,Se,Te,Oe));break;case u:me.trigger("pinchOut",[ye||null,be||0,ge||0,Se,Te,Oe]),t.pinchOut&&(w=t.pinchOut.call(me,n,ye||null,be||0,ge||0,Se,Te,Oe))}}return c==f?s!==x&&s!==m||(clearTimeout(ke),clearTimeout(Ae),z()&&!G()?(Re=le(),ke=setTimeout(e.proxy((function(){Re=null,me.trigger("tap",[n.target]),t.tap&&(w=t.tap.call(me,n,n.target))}),this),t.doubleTapThreshold)):(Re=null,me.trigger("tap",[n.target]),t.tap&&(w=t.tap.call(me,n,n.target)))):c==d?s!==x&&s!==m||(clearTimeout(ke),clearTimeout(Ae),Re=null,me.trigger("doubletap",[n.target]),t.doubleTap&&(w=t.doubleTap.call(me,n,n.target))):c==g&&(s!==x&&s!==m||(clearTimeout(ke),Re=null,me.trigger("longtap",[n.target]),t.longTap&&(w=t.longTap.call(me,n,n.target)))),w}function H(){var e=!0;return null!==t.threshold&&(e=he>=t.threshold),e}function _(){var e=!1;return null!==t.cancelThreshold&&null!==fe&&(e=ee(fe)-he>=t.cancelThreshold),e}function q(){return!(t.maxTimeThreshold&&ge>=t.maxTimeThreshold)}function Q(){var e=Y(),n=V(),r=null===t.pinchThreshold||be>=t.pinchThreshold;return e&&n&&r}function C(){return!!(t.pinchStatus||t.pinchIn||t.pinchOut)}function F(){var e=q(),n=H(),t=Y(),r=V();return!_()&&r&&t&&n&&e}function X(){return!!(t.swipe||t.swipeStatus||t.swipeLeft||t.swipeRight||t.swipeUp||t.swipeDown)}function Y(){return Se===t.fingers||t.fingers===T||!S}function V(){return 0!==Oe[0].end.x}function W(){return!!t.tap}function z(){return!!t.doubleTap}function G(){if(null==Re)return!1;var e=le();return z()&&e-Re<=t.doubleTapThreshold}function Z(){Pe=0,Le=0}function B(){var e=!1;Pe&&(le()-Pe<=t.fingerReleaseThreshold&&(e=!0));return e}function J(e){me&&(!0===e?(me.bind(ue,L),me.bind(se,R),ce&&me.bind(ce,A)):(me.unbind(ue,L,!1),me.unbind(se,R,!1),ce&&me.unbind(ce,A,!1)),me.data(D+"_intouch",!0===e))}function K(e,n){var t={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return t.start.x=t.last.x=t.end.x=n.pageX||n.clientX,t.start.y=t.last.y=t.end.y=n.pageY||n.clientY,Oe[e]=t,t}function $(e){var n=void 0!==e.identifier?e.identifier:0,t=function(e){return Oe[e]||null}(n);return null===t&&(t=K(n,e)),t.last.x=t.end.x,t.last.y=t.end.y,t.end.x=e.pageX||e.clientX,t.end.y=e.pageY||e.clientY,t}function ee(e){if(Ee[e])return Ee[e].distance}function ne(e){return{direction:e,distance:0}}function te(){return De-Me}function re(e,n){var t=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);return Math.round(Math.sqrt(t*t+r*r))}function ie(e,n){if(a=n,(t=e).x==a.x&&t.y==a.y)return s;var t,a,u=function(e,n){var t=e.x-n.x,r=n.y-e.y,i=Math.atan2(r,t),l=Math.round(180*i/Math.PI);return l<0&&(l=360-Math.abs(l)),l}(e,n);return u<=45&&u>=0||u<=360&&u>=315?r:u>=135&&u<=225?i:u>45&&u<135?o:l}function le(){return(new Date).getTime()}t=e.extend({},t);var oe=S||M||!t.fallbackToMouseEvents,ae=oe?M?O?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ue=oe?M?O?"MSPointerMove":"pointermove":"touchmove":"mousemove",se=oe?M?O?"MSPointerUp":"pointerup":"touchend":"mouseup",ce=oe?M?"mouseleave":null:"mouseleave",pe=M?O?"MSPointerCancel":"pointercancel":"touchcancel",he=0,fe=null,de=null,ge=0,we=0,ve=0,Te=1,be=0,ye=0,Ee=null,me=e(n),xe="start",Se=0,Oe={},Me=0,De=0,Pe=0,Le=0,Re=0,ke=null,Ae=null;try{me.bind(ae,P),me.bind(pe,k)}catch(n){e.error("events not supported "+ae+","+pe+" on jQuery.swipe")}this.enable=function(){return this.disable(),me.bind(ae,P),me.bind(pe,k),me},this.disable=function(){return I(),me},this.destroy=function(){I(),me.data(D,null),me=null},this.option=function(n,r){if("object"==typeof n)t=e.extend(t,n);else if(void 0!==t[n]){if(void 0===r)return t[n];t[n]=r}else{if(!n)return t;e.error("Option "+n+" does not exist on jQuery.swipe.options")}return null}}var r="left",i="right",l="up",o="down",a="in",u="out",s="none",c="auto",p="swipe",h="pinch",f="tap",d="doubletap",g="longtap",w="horizontal",v="vertical",T="all",b=10,y="start",E="move",m="end",x="cancel",S="ontouchstart"in window,O=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!S,M=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!S,D="TouchSwipe";e.fn.swipe=function(t){var r=e(this),i=r.data(D);if(i&&"string"==typeof t){if(i[t])return i[t].apply(i,Array.prototype.slice.call(arguments,1));e.error("Method "+t+" does not exist on jQuery.swipe")}else if(i&&"object"==typeof t)i.option.apply(i,arguments);else if(!(i||"object"!=typeof t&&t))return n.apply(this,arguments);return r},e.fn.swipe.version="1.6.18",e.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},e.fn.swipe.phases={PHASE_START:y,PHASE_MOVE:E,PHASE_END:m,PHASE_CANCEL:x},e.fn.swipe.directions={LEFT:r,RIGHT:i,UP:l,DOWN:o,IN:a,OUT:u},e.fn.swipe.pageScroll={NONE:s,HORIZONTAL:w,VERTICAL:v,AUTO:c},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:T}}));
